/*
 * SPDX-License-Identifier: Apache-2.0
 * Copyright Contributors to the ODPi Egeria project.
 */

// build.gradle
plugins {
    id 'org.siouan.frontend-jdk11'
    id 'distribution'

}

apply plugin: 'distribution'


frontend {
    nodeVersion = '12.19.0'
    // See 'scripts' section in your 'package.json file'
    //cleanScript = 'run clean'
    assembleScript = 'run build'
    // This can run a test if configured in package.json
    //checkScript = 'run check'
    // Location of the package.json
    packageJsonDirectory = file("${projectDir}/nodejs")
}

distributions {
    presentationserver {
        distributionBaseName = "${rootProject.name}-presentation-server"
        contents {
            into('') {
                //from("${project(':open-metadata-implementation:user-interfaces:presentation-server').projectDir}")
                from 'nodejs'
                include 'package.json'
                include 'dist/**'
                include 'src/**'
                include 'ssl/**'
                include 'public/**'
                exclude 'node_modules/**'
                exclude 'build.gradle'
                fileMode = 0755
            }
        }
    }
}

// Ditto for the deploy distribution
presentationserverDistTar.compression = Compression.GZIP
presentationserverDistTar.archiveExtension = 'tar.gz'
presentationserverDistTar.archiveFileName = (rootProject.name + '-' + rootProject.version + '-presentation-server.tar.gz')
presentationserverDistZip.enabled=false
